<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Kumoru Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
    <img width="50" src="images/logo.svg" />Kumoru
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Kumoru.io documentation. Kumoru is a service for making application management and deployment as simple as possible on public clouds.
The documenation on this site is intended to describe Kumoru concepts and how to consume the Kumoru service through the CLI.</p>

<p>We do not currently have language bindings for the APIs. Please let us know if you would like to see bindings for your favorite language. The commands shown are done so with the official <a href="https://github.com/kumoru/kumoru-cli">kumoru cli</a>.</p>

<h2 id="customer-fit">Customer Fit</h2>

<h3 id="stateless-applications">Stateless Applications</h3>

<p>Kumoru was designed to run and scale applications with ease. As part of this design there is no shared state between containers. This means that any data local to a container is lost if that contianer stops for any reason, whether it&rsquo;s failure or a scaling down event.</p>

<p>A good guide for applications that will run great in kumoru is the <a href="http://12factor.net/">12 factor app</a>.</p>

<p>It is intended for users to store state in another location, such as a remote database, cache or queue.</p>

<h3 id="soa-and-microservice">SOA and Microservice</h3>

<p>Kumoru allows users to run multiple applications on the same set of resources. Ideally users should plan their architecture around either a Service Oriented Architexture or a Microservices model. Both are accetable inside Kumoru.</p>

<p>All publicly exposed applications are load balanced automatically. Connecting applications can be done by referncing their addresses.</p>

<h3 id="cloud-first">Cloud First</h3>

<p>Currently Kumoru only runs applications on AWS however additional public clouds will be allowed in the future. This means that applications can take full advantage of what AWS has to offer (RDS, S3, etc).</p>

          <h1 id="getting-started">Getting Started</h1>

<h2 id="quickstart">Quickstart</h2>

<aside class="warning">Please note that during Alpha release, user accounts must be manually enabled by Kumoru team.</aside>

<ol>
<li>Install the CLI

<ul>
<li>Download the latest release: 

<ul>
<li><a href="https://github.com/kumoru/kumoru-cli/releases">https://github.com/kumoru/kumoru-cli/releases</a></li>
</ul></li>
<li>Build from source:

<ul>
<li><a href="https://github.com/kumoru/kumoru-cli">https://github.com/kumoru/kumoru-cli</a></li>
</ul></li>
</ul></li>
<li>Create an Account

<ul>
<li><code># kumoru accounts create -f $firstName -l $lastName -p $yourPassword $emailAddress</code></li>
</ul></li>
<li>Request Kumoru <a href="mailto:support@kumoru.io">account activation</a></li>
<li>Login via CLI

<ul>
<li><code># kumoru login</code></li>
</ul></li>
<li>Choose Pool to Deploy Application into, notate UUID

<ul>
<li><code># kumoru pools list</code></li>
</ul></li>
<li>Create an Application, notate UUID

<ul>
<li><code># kumoru applications create -p 80:8080 -r green=100 -e VERSION=v1 -t $tagName $poolUUID quay.io/kumoru/sample-app $yourAppName</code></li>
</ul></li>
<li>Deploy an Application

<ul>
<li><code># kumoru applications deploy $yourAppUUID</code></li>
</ul></li>
</ol>

<h2 id="sample-application">Sample Application</h2>

<p>Let&rsquo;s deploy a sample application which will show the deployment workflow, traffic rules, port access, tagging and environment variables.</p>

<p>The following steps assume you have an active user account and a valid token.</p>

<h2 id="decide-which-pool-to-deploy-to">Decide which pool to deploy to:</h2>
<pre class="highlight shell"><code>kumoru pools list

Location   Uuid                                  Status
us-east-1  0269fc49-db71-400c-bfb5-cd5f47cc782c  running
</code></pre>

<p>Note the UUID of your pool since you&rsquo;ll need it for the next command.</p>

<h2 id="create-the-sample-application">Create the sample application</h2>
<pre class="highlight shell"><code>kumoru applications create <span class="se">\</span>
-p 80:8080 <span class="se">\</span>
-r <span class="nv">green</span><span class="o">=</span>100 <span class="se">\</span>
-e <span class="nv">VERSION</span><span class="o">=</span>v1 <span class="se">\</span>
-t getting-started <span class="se">\</span>
0269fc49-db71-400c-bfb5-cd5f47cc782c quay.io/kumoru/sample-app sample-app

Application Details:

Addresses:            <span class="o">[]</span>
CreatedAt:
CurrentDeployments:   map[]
Environment:          map[VERSION:v1]
Hash:
ImageUrl:             quay.io/kumoru/sample-app
Location:             us-east-1
LogToken:             45890797-48b3-47c1-bc58-2afa14674be6
Metadata:             map[tags:[getting-started]]
OrchestrationUrl:     http://kumoru-po-LoadBala-1E5BWBC9IWASE-1208370489.us-east-1.elb.amazonaws.com
Name:                 sample-app
PoolUuid:             0269fc49-db71-400c-bfb5-cd5f47cc782c
Ports:                <span class="o">[</span>80:8080]
ProviderCredentials:  aws_access_key:aws_secret_key@aws
Rules:                <span class="nv">green</span><span class="o">=</span>100
Status:
UpdatedAt:
Url:
Uuid:                 4a12ee96-809b-4295-8e12-e082bda8004d
Certificates:         map[]
</code></pre>

<p>Next we&rsquo;ll create our first application, <code class="prettyprint">sample-app</code>, using a small image our team created ahead of time.</p>

<p>Here is some information on the options we passed:</p>

<ul>
<li><code class="prettyprint">-p</code> tells Kumoru that we want to expose port <code class="prettyprint">80</code> on the loadbalancer and connect that to port <code class="prettyprint">8080</code> which is exposed in the container</li>
<li><code class="prettyprint">-r</code> tells Kumoru that we want to use the docker image tag <code class="prettyprint">green</code> and weight the traffic at 100%</li>
<li><code class="prettyprint">-e</code> tells Kumoru that we want the environment variable <code class="prettyprint">VERSION</code> available to our containers</li>
<li><code class="prettyprint">-t</code> tells Kumoru that we want to tag the application with <code class="prettyprint">getting-started</code> for easier filtering in the clients</li>
<li><code class="prettyprint">0269fc49-db71-400c-bfb5-cd5f47cc782c</code> is the pool UUID that we want the application deployed into</li>
<li><code class="prettyprint">quay.io/kumoru/sample-app</code> is the docker image URL (without the image tag)</li>
<li><code class="prettyprint">sample-app</code> is the name of the application</li>
</ul>

<p>If you get a <code class="prettyprint">403 forbidden access to pool â€¦</code>, make sure they UUID you used it correct.</p>

<h2 id="deploy-the-sample-application">Deploy the sample application</h2>
<pre class="highlight shell"><code>kumoru applications deploy 4a12ee96-809b-4295-8e12-e082bda8004d
Deploying application 4a12ee96-809b-4295-8e12-e082bda8004d
</code></pre>

<p>You can start your first deployment using the UUID of the application we just created. This will take a few moments the first time since Kumoru must </p>

<ol>
<li>Download the docker image</li>
<li>Start the containers</li>
<li>Create an ELB and wait for the ELB DNS record to resolve prior to considering the application as <code class="prettyprint">running</code></li>
</ol>

<p>This is the longest process when using Kumoru. Future deployments are considerably faster since Kumoru only needs to download docker image differentials.</p>

<h2 id="access-the-sample-application">Access the sample application</h2>
<pre class="highlight shell"><code>kumoru applications show 4a12ee96-809b-4295-8e12-e082bda8004d
Application Details:

Addresses:            <span class="o">[</span>df30014009fe4e1f9f75d7b27d8574d1-458773757.us-east-1.elb.amazonaws.com:80]
CreatedAt:            2016-01-04T16:57:10.490856
CurrentDeployments:   map[green:be03fe13-a9fd-491c-bb10-9d96f513adfb]
Environment:          map[VERSION:v1]
Hash:                 c507b10bcaaf4fca798bfea64aa12c6474d065537d28f905b294dfec8346e11f
ImageUrl:             quay.io/kumoru/sample-app
Location:             us-east-1
LogToken:             c44c38d4-440c-4ca2-8d60-a313ed62a747
Metadata:             map[tags:[getting-started]]
OrchestrationUrl:     http://kumoru-po-LoadBala-1E5BWBC9IWASE-1208370489.us-east-1.elb.amazonaws.com
Name:                 sample-app
PoolUuid:             0269fc49-db71-400c-bfb5-cd5f47cc782c 
Ports:                <span class="o">[</span>80:8080]
ProviderCredentials:  aws_access_key:aws_secret_key@aws
Rules:                <span class="nv">green</span><span class="o">=</span>100
Status:               running
UpdatedAt:            2016-01-04T16:57:10.490876
Url:
Uuid:                 4a12ee96-809b-4295-8e12-e082bda8004d
Certificates:         map[]
</code></pre>

<p>We can access the application by leveraging the <code class="prettyprint">address</code> associated with it. Use <code class="prettyprint">kumoru application show</code> to see all details about a given application.</p>

<p>You may open the address in a browser(<code class="prettyprint">df30014009fe4e1f9f75d7b27d8574d1-458773757.us-east-1.elb.amazonaws.com</code> in my case) or curl it from the command line to see the content.</p>

<h2 id="update-the-sample-application">Update the sample application</h2>
<pre class="highlight shell"><code>kumoru applications patch <span class="se">\</span>
-r <span class="nv">blue</span><span class="o">=</span>100 <span class="se">\</span>
-e <span class="nv">VERSION</span><span class="o">=</span>v2 <span class="se">\</span>
4a12ee96-809b-4295-8e12-e082bda8004d

Application Details:

Addresses:            <span class="o">[</span>df30014009fe4e1f9f75d7b27d8574d1-458773757.us-east-1.elb.amazonaws.com:80]
CreatedAt:            2016-01-04T16:57:10.490856
CurrentDeployments:   map[green:be03fe13-a9fd-491c-bb10-9d96f513adfb]
Environment:          map[VERSION:v2]
Hash:                 c507b10bcaaf4fca798bfea64aa12c6474d065537d28f905b294dfec8346e11f
ImageUrl:             quay.io/kumoru/sample-app
Location:             us-east-1
LogToken:             c44c38d4-440c-4ca2-8d60-a313ed62a747
Metadata:             map[tags:[getting-started]]
OrchestrationUrl:     http://kumoru-po-LoadBala-S53V9B1YFP70-916465214.us-east-1.elb.amazonaws.com
Name:                 sample-app
PoolUuid:             0269fc49-db71-400c-bfb5-cd5f47cc782c
Ports:                <span class="o">[</span>80:8080]
ProviderCredentials:  aws_access_key:aws_secret_key@aws
Rules:                <span class="nv">blue</span><span class="o">=</span>100
Status:               running
UpdatedAt:            2016-01-04T16:57:10.490876
Url:
Uuid:                 4a12ee96-809b-4295-8e12-e082bda8004d
Certificates:         map[]
</code></pre>

<p>Change the docker image tag to <code class="prettyprint">blue</code> and change the ENV VERSION to <code class="prettyprint">v2</code> to show that we do indeed get an updated version of our application without downtime.</p>

<h2 id="deploy-the-changes">Deploy the changes</h2>
<pre class="highlight shell"><code>kumoru applications deploy 4a12ee96-809b-4295-8e12-e082bda8004d
Deploying application 4a12ee96-809b-4295-8e12-e082bda8004d
</code></pre>

<p>In the last step we changed the rules for the application but hadn&rsquo;t yet deployed the changes. We must initiate a new deployment of the applciation for the changes to take effect.</p>

<p>Refresh the page in the browser or curl the address again to see the new content. You may need to force refresh your browser to clean the cache.</p>

<p>Note that this process takes considerably less time than the initial deployment.</p>

<h2 id="delete-the-sample-application">Delete the sample application</h2>
<pre class="highlight shell"><code>kumoru applications delete 4a12ee96-809b-4295-8e12-e082bda8004d
Application 4a12ee96-809b-4295-8e12-e082bda8004d accepted <span class="k">for </span>archival
</code></pre>

<p>You may delete the application when ready. Deleting applications removes any resources associated with it(ELB, containers, etc) but the application data will persist in the datastore in an <code class="prettyprint">archived</code> state.</p>

          <h1 id="accessing-kumoru">Accessing Kumoru</h1>

<h2 id="cli">CLI</h2>

<p>There are 2 methods for installing the CLI:</p>

<ol>
<li>Retrieve the binary for your operation system from <a href="https://github.com/kumoru/kumoru-cli/releases">Github</a></li>
<li>Build From Source

<ul>
<li>See building instructions on <a href="https://github.com/kumoru/kumoru-cli">Github</a></li>
</ul></li>
</ol>

<h2 id="webui">WebUI</h2>

<p>Alternatively you may access the Web UI at <a href="https://alpha.kumoru.io">https://alpha.kumoru.io</a></p>

          <h1 id="accounts">Accounts</h1>

<h3 id="definition-the-data-representing-an-user">Definition: the data representing an user</h3>

<p>Accounts are used to provide users access to the service.  The permissions structure is designed that a person only needs one account for all of Kumoru even if they are a member of multiple roles.</p>

<p>An account is the mechanism by which you can create tokens which are then used for all future communication.</p>

<h2 id="create-an-account">Create an Account</h2>
<pre class="highlight shell"><code>kumoru accounts create -f John -l Doe user@example.com
</code></pre>

<h3 id="cli-parameters">CLI Parameters</h3>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI option</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>given name</td>
<td>-f</td>
<td>Your first name</td>
</tr>
<tr>
<td>surname</td>
<td>-l</td>
<td>Your last name</td>
</tr>
<tr>
<td>password</td>
<td>-p</td>
<td>Your password</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI Arguement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>1st</td>
<td>The email assocaited with the user</td>
</tr>
</tbody></table>

<h2 id="get-an-account">Get an Account</h2>
<pre class="highlight shell"><code>kumoru accounts show user@example.com
</code></pre>

<h2 id="errors">Errors</h2>

<h1 id="roles">Roles</h1>

<h3 id="definition">Definition:</h3>

<h2 id="errors">Errors</h2>

<h1 id="secrets">Secrets</h1>

<h3 id="definition">Definition:</h3>

<h2 id="errors">Errors</h2>

<h1 id="tokens">Tokens</h1>

<h3 id="definition-a-set-of-uuids-one-public-and-one-private-that-is-used-to-sign-all-requests-to-the-kumoru-apis">Definition: A set of UUIDs, one public and one private, that is used to sign all requests to the Kumoru APIs.</h3>

<p>All HTTP requests to Kumoru.io services must be cryptographically signed. The Kumoru APIs follow the <a href="http://tools.ietf.org/html/draft-cavage-http-signatures-05">Internet Draft</a> which describes message signing. This is very similar to how <a href="http://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html">AWS</a> signs their requests.</p>

<aside class="warning">cURL isn&rsquo;t available to interact with the APIs due to the requirement that all requests be signed.</aside>

<p>As of:</p>

<ul>
<li>Dec 2015: You have as many tokens as you like and tokens do not expire.</li>
<li>Dec 2015: Both UUIDs are generated by the authorization API.</li>
</ul>

<p>In the future:</p>

<ul>
<li>The private token in the pair will be encrypted and not accessible by anyone but yourself. If you lose this token are suspect it is compromised, it is recommend you remove the token and use a new one.</li>
</ul>

<aside class="info">Remember: Tokens are specific to your account and should not be shared.</aside>

<h2 id="create-a-token">Create a Token</h2>
<pre class="highlight shell"><code>kumoru tokens create

Generating new token.
Enter Username: user@example.com
Enter Password:
</code></pre>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI Option</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>force</td>
<td>&ndash;force</td>
<td>overwrite config file even it exists</td>
</tr>
<tr>
<td>don&rsquo;t save</td>
<td>-d</td>
<td>Print tokens to screen instead of writing to file</td>
</tr>
</tbody></table>

<h2 id="delete-a-token">Delete a Token</h2>
<pre class="highlight shell"><code>kumoru tokens delete TOKEN_UUID
</code></pre>

<p>The TOKEN_UUID in question is the public token.</p>

<h2 id="errors">Errors</h2>

          <h1 id="pools">Pools</h1>

<p><strong>Definition:</strong> Pools are clustered resources in a cloud provider managed by the Kumoru services.</p>

<p>All applications assigned to a given pool will run with a minimum of 2 containers inside of that pool.</p>

<p>Pools are designed to be abstract and we purposly present minimal information about them.</p>

<p>As of:</p>

<ul>
<li>Dec 2015: The amount of resources (CPU, RAM, Disk, Network) are static for all pools in the Alpha phase.

<ul>
<li>CPU: 3 x 1 vCPU</li>
<li>RAM: 3 x 3.75GiB</li>
<li>Disk: 3 x 40GB (General Purpose 2)</li>
</ul></li>
<li>Dec 2015: There is no guarantee that all containers for a given application will run on different nodes. There is a guarantee of containers being re-scheduled elsewhere if a member goes offline for any reason.</li>
</ul>

<h2 id="pool-security">Pool Security</h2>

<ul>
<li>Access to pool members is completely locked down from the outside except for SSH access.</li>
<li>SSH keys are the only form of SSH access (passwords are not set)</li>
<li>Members run a recent version of the CoreOS operating system configured to auto-update. Members are configured to be part of the &lsquo;stable&rsquo; channel.</li>
<li>Due to the need for intra-cluster communication, port access is not restricted between pool members.</li>
</ul>

<h2 id="create-a-pool">Create A Pool</h2>
<pre class="highlight shell"><code>kumoru pools create -l us-east-1 -c access_key:secret_key@provider

</code></pre>

<h3 id="cli-parameters">CLI Parameters</h3>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>location</td>
<td>1st</td>
<td>The provider specific location of the pool (i.e. us-east-1)</td>
</tr>
<tr>
<td>credentials</td>
<td>2nd</td>
<td>Credentials used to create and manager pool resources. See below for provider specific format:</td>
</tr>
</tbody></table>

<h3 id="provider-specifics">Provider Specifics</h3>

<ul>
<li>AWS: <code class="prettyprint">access_key:secret_key@aws</code></li>
</ul>

<h2 id="get-a-pool">Get a Pool</h2>
<pre class="highlight shell"><code>kumoru pools show <span class="sb">`</span>UUID<span class="sb">`</span>
â€¦
</code></pre>

<p>Show all details about a specific pool.</p>

<h2 id="get-all-pools">Get all Pools</h2>
<pre class="highlight shell"><code>kumoru pools list
â€¦
</code></pre>

<p>Retrieve a list of pools.</p>

<h2 id="delete-a-pool">Delete a Pool</h2>
<pre class="highlight shell"><code>kumoru pools delete <span class="sb">`</span>UUID<span class="sb">`</span>
â€¦
</code></pre>

<p>Archive a pool</p>

<h2 id="errors">Errors</h2>

          <h1 id="applications">Applications</h1>

<h3 id="definition-information-that-kumoru-will-use-to-create-a-deployment">Definition: information that kumoru will use to create a deployment.</h3>

<p>Applications are the primary focus of Kumoru. We expect users to interact with Kumoru primarily by creating applications and deploying them.</p>

<p>When an application is created, it is not deployed by default. You&rsquo;ll need to create an initial <a href="#deployments">deployment</a> to have a running application.</p>

<h2 id="create-an-application">Create an Application</h2>
<pre class="highlight shell"><code>kumoru applications create <span class="o">[</span>OPTIONS] POOL_UUID IMG_URL APP_NAME

</code></pre>

<h3 id="cli">CLI</h3>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI Option</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>certificate</td>
<td>--certificate</td>
<td>The path to a PEM encoded SSL certificate. Setting this on an application will enable SSL on all Ports</td>
</tr>
<tr>
<td>certificate chain</td>
<td>--certificate_chain</td>
<td>The path to a PEM encoded certificate chain. (optional)</td>
</tr>
<tr>
<td>environment file</td>
<td>--env_file</td>
<td>File containing environment variables</td>
</tr>
<tr>
<td>private key</td>
<td>--private_key</td>
<td>The path to a PEM encoded private key tied to the certificate. Required if used &ndash;certificate</td>
</tr>
<tr>
<td>SSL port</td>
<td>-ssl_port</td>
<td>Port tied to SSL certificate. See <code class="prettyprint">-p</code> for details.</td>
</tr>
<tr>
<td>provider credentials</td>
<td>-c</td>
<td>A set of credentials that will be used to create resources on behalf of the application (i.e. ELB)</td>
</tr>
<tr>
<td>environment</td>
<td>-e</td>
<td>String containing a KEY=value environment variable that will be passed to the containers. You may specify multiple of these</td>
</tr>
<tr>
<td>rule</td>
<td>-r</td>
<td>String containing tag=weight (i.e. latest=100). You may specify multiple of these and doing so will cause multiple deployments (1 for each tag)</td>
</tr>
<tr>
<td>port</td>
<td>-p</td>
<td>String standard docker port mapping (i.e. 80:8080 where 80 is the frontend port and 8080 is the port accessible in the container). You may specify multiple of these</td>
</tr>
<tr>
<td>tags</td>
<td>-t</td>
<td>String to be used as an identifier. You may specify multiple of these</td>
</tr>
<tr>
<td>metadata</td>
<td>-m</td>
<td>JSON string of arbitrary metadata</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Concept</th>
<th>CLI Arguement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pool uuid</td>
<td>1st</td>
<td>The UUID of the pool the application is to be deployed in.</td>
</tr>
<tr>
<td>image url</td>
<td>2nd</td>
<td>The url of the docker image. See below for acceptable urls.</td>
</tr>
<tr>
<td>application name</td>
<td>3rd</td>
<td>The name of the application.</td>
</tr>
</tbody></table>

<p>The following types of image urls are acceptable and may be transformed:</p>

<table><thead>
<tr>
<th>Input</th>
<th>Transformation</th>
</tr>
</thead><tbody>
<tr>
<td>image</td>
<td>registry.hub.docker.com/library/image</td>
</tr>
<tr>
<td>username/image</td>
<td>registry.hub.docker.com/username/image</td>
</tr>
<tr>
<td>myregistry.com/username/image</td>
<td>myregistry.com/usernameimage</td>
</tr>
<tr>
<td>user:password@myregistry.com/username/image</td>
<td>Private image</td>
</tr>
</tbody></table>

<ul>
<li>If you are familiar with Docker you may Notice there is no image tag listed. These are provided via the <code class="prettyprint">rules</code> flag.</li>
</ul>

<h2 id="get-an-application">Get an Application</h2>
<pre class="highlight shell"><code>kumoru applications show APPLICATION_UUID
â€¦
</code></pre>

<p>Returns all details of a given application.</p>

<h2 id="get-all-applications">Get all Applications</h2>
<pre class="highlight shell"><code>kumoru applications list
â€¦
</code></pre>

<p>Displays a list of all applications with minimal details.</p>

<h2 id="update-an-application">Update an Application</h2>
<pre class="highlight shell"><code>kumoru applications patch <span class="o">[</span>OPTIONS] APPLICATION_UUID
â€¦
</code></pre>

<p>Update a particular application parameter. </p>

<ul>
<li>If you are changes the environment variables, you must pass all environment variables including any that were not changed.</li>
</ul>

<p>See <a href="#create-an-application">Create an application</a> for available options.</p>

<p>You must <a href="#create-a-deployment">create a deployment</a> for the changes to take effect.</p>

<h2 id="delete-an-application">Delete an Application</h2>
<pre class="highlight shell"><code>kumoru applications delete APPLICATION_UUID
</code></pre>

<p>Deleting an application will remove the loadbalancer associated with the application. Running containers will be stopped as well.</p>

<h2 id="application-security">Application Security</h2>

<ul>
<li>External ingress traffic is only allowed to applications via their load balancer and only on the port specified. If no port is specified, external ingress traffic is not allowed.</li>
<li>Access to the instances and containers is completely isolated to all except the Kumoru support team.</li>
</ul>

<h2 id="statuses">Statuses</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Instantiating</td>
<td>The application has been created but not yet deployed.</td>
</tr>
<tr>
<td>Deploying</td>
<td>A deployment action has been started.</td>
</tr>
<tr>
<td>Checking</td>
<td>Kumoru is determining if the application is running and/or externally available.</td>
</tr>
<tr>
<td>Running</td>
<td>The application has been deployed and is available externally.</td>
</tr>
<tr>
<td>Archiving</td>
<td>The archival process us underway.</td>
</tr>
<tr>
<td>Archived</td>
<td>All archive actions are complete and the deployments are no longer available.</td>
</tr>
<tr>
<td>Errored-</td>
<td>An error has ocurred. The relevant error message wil be included in the status.</td>
</tr>
</tbody></table>

<h2 id="logging">Logging</h2>

<ul>
<li>As of Jan 2016: To see any logs generated by your application you must configure it to send them to a remote service. This can be done by using a logging library in your code or if your container image has an opterating system configuring a loggin service (i.e.syslog) to forward logs to a remote service.</li>
</ul>

<h2 id="errors">Errors</h2>

          <h1 id="deployments">Deployments</h1>

<h3 id="definition-the-immutable-instantiation-of-an-application">Definition: The immutable instantiation of an application.</h3>

<p>Deployments represent a running rule for an application. There will be a deployment for every rule specified on an application.</p>

<p>Deployments are immutable and capture the application details at the time of their creation. This means that an application can be rolled back via the details of that deployment.</p>

<p>When an application is deployed, Kumoru will attempt to figure out if any changes have been made (i.e. a new docker image hash, change environment variables, etc). If no changes are present, no actions are taken.</p>

<h2 id="create-a-deployment">Create a deployment</h2>
<pre class="highlight shell"><code>kumoru applications deploy APPLICATION_UUID
â€¦
</code></pre>

<p>Deploying a new or changed application always following the same process</p>

<ol>
<li>Commit code and create a new docker image.</li>
<li>Update the application rules if required (i.e. if a new docker tag is needed)</li>
<li>Create a deployment.</li>
</ol>

<p>Ideally docker image building should be automated. If this is the case then most of the time the only step needed to get the new software running is to create the deployment.</p>

<h2 id="errors">Errors</h2>

          <h1 id="faq">FAQ</h1>

<h3 id="why-can-39-t-stateful-applications-deployed-in-kumoru-io">Why can&rsquo;t stateful applications deployed in Kumoru.io?</h3>

<p>Technically, they can. However there is no gaurantee of state for a given container or between containers.
This means that if you were to deploy a mysql image, there would be two running containers of mysql with no
shared data between them. If there is a failure, a new container will be scheduled and will not have any data from the failed container.</p>

<p>These restrictions are forced because we view infrastructure as needing separate scaling mechanisms. Databases require a very different approach to scaling than an API service and should be treated as such.</p>

<p>We expect users to leverage remote resources for state. This means you can consume a cloud service (i.e. RDS) or run your own service (i.e. mysql on EC2). Both can be accessed by your service via Environment Variables.</p>

<h3 id="do-you-dogfood-your-service">Do you dogfood your service?</h3>

<p>I&rsquo;m glad you asked. The answer is yes. We are our first customer!</p>

<p>The APIs you interact with when consuming kumoru.io are all hosted via Kumoru.io. This makes bootstraping our APIs interesting but that&rsquo;s a story for another time.</p>

<h3 id="can-you-explain-deployments-and-applications-better">Can you explain deployments and applications better?</h3>

<p>Applications are simply the instructions for deployments. When an application is created, we&rsquo;ve really just saved the rules for future deployments which is why a deployment is required to get the application running.</p>

<p>Deployments on the otherhand represent the running point in time of an application. As such, deployments are immutable. This has the following side effects:</p>

<ol>
<li>Details about a application at a specific point in time are stored forever as a deployment.</li>
<li>Deployments can be used to rollback an application to the state when they were created.</li>
<li>There will be a deployment for each <code class="prettyprint">rule</code> (i.e. image tag) that is configured on an application.</li>
</ol>

<p>The vast majority of actions an user will take on kumoru is deploying applications. After the initial deployment, deploying updates is a very quick process (depending on docker image size).</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
